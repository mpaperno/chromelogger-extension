<!doctype html>
<!--/**
 * Extension options page.
 * @since 1.5
 * @since 1.7
 *	- added classname styles.
*/-->
<html>
	<head>
		<title>ChromeLogger Options</title>
		<meta charset="utf-8"/>
		<meta name="color-scheme" content="dark light">
		<style type="text/css">

			body {
				margin: 1em .5em 0;
				/* This width fits in current Firefox settings window and forces Chrome's to be large enough, w/out scrolling. */
				min-width: 620px;
				overflow: auto;  /* for sticky button box */
			}

			fieldset {
				border-radius: 3px;
				margin-bottom: 1em;
				display: grid;
				grid-template-columns: 25% auto;
				gap: 1em;
				align-items: stretch;
			}

			legend {
				width: 25%;
  			padding-left: 1em;
				grid-column: 1 / -1;
			}

			form > fieldset > *:nth-child(even):not(legend) {
				overflow: clip;
				text-align: right;
				align-content: center;
			}

			fieldset.subset {
				border-width: 0;
				padding: 0;
				margin: .4em 0 0;
				display: flex;
				flex-flow: row wrap;
				row-gap: 0.3em;
				column-gap: .75em;
				align-items: center;
			}

			.align-top { align-self: start; }
			.flex-grow { flex-grow: 1; }

			.help {
				border: 1.75px solid currentColor;
				border-radius: 50%;
				padding: .1em .5em;
				font-weight: bold;
				margin-left: auto;
				margin-right: .1em;
				cursor: help;
			}

			.buttonbox {
				display: grid;
				grid-template-columns: 1fr 1fr 2fr;
				justify-items: center;
				column-gap: 0em;
				background-color: color-mix(in srgb, Canvas 90%, transparent);
				padding: .75em 0;
				position: sticky;
				left: 0;
				right: 0;
				bottom: .5em;
			}

			/* the message_area displays short status messages, like "settings saved" */
			#message_area {
				height: 2em;
				justify-self: right;
				padding-right: 1em;
				font-size: 1.2em;
				overflow: auto;
				opacity: 0;
				transition: opacity 1s;
			}
			#message_area.visible {
				opacity: 1;
			}
			/* message colors by status type */
			#message_area[data-status='ok']    { color: limegreen; }
			#message_area[data-status='warn']  { color: orange; }
			#message_area[data-status='error'] { color: red; }

		</style>
		<script type="text/javascript" src="browser-polyfill.min.js"></script>
		<script type="text/javascript" src="global.js"></script>
		<script type="text/javascript" src="options.js"></script>
	</head>
	<body>

		<form>

		<fieldset id="console_substitution_styles">

			<legend>Substitution Styles</legend>

			<div><label for="console_substitution_styles-error">Console.error()</label></div>
			<input type="text" id="console_substitution_styles-error"/>

			<div><label for="console_substitution_styles-warn">Console.warn()</label></div>
			<input type="text" id="console_substitution_styles-warn"/>

			<div><label for="console_substitution_styles-info">Console.info()</label></div>
			<input type="text" id="console_substitution_styles-info"/>

			<div><label for="console_substitution_styles-log">Console.log()</label></div>
			<input type="text" id="console_substitution_styles-log"/>

			<div><label for="console_substitution_styles-group">Console.group()</label></div>
			<input type="text" id="console_substitution_styles-group"/>

			<div><label for="console_substitution_styles-number">Number</label></div>
			<input type="text" id="console_substitution_styles-number"/>

			<div><label for="console_substitution_styles-fileline">/backtrace/file:line</label></div>
			<input type="text" id="console_substitution_styles-fileline"/>

			<div><label for="console_substitution_styles-classname">Class Name</label></div>
			<input type="text" id="console_substitution_styles-classname"/>

			<div><label for="console_substitution_styles-header">Data Header</label></div>
			<input type="text" id="console_substitution_styles-header"/>

		</fieldset>

		<fieldset>

			<legend>Misc. Settings</legend>

			<label>Display URL Data Header</label>
			<fieldset class="subset">
				<label for="display_data_url_0"><input type="radio" name="display_data_url" id="display_data_url_0" value=""/>Hidden</label>
				<label for="display_data_url_1"><input type="radio" name="display_data_url" id="display_data_url_1" value="log"/>Basic</label>
				<label for="display_data_url_2"><input type="radio" name="display_data_url" id="display_data_url_2" value="group"/>Group expanded</label>
				<label for="display_data_url_3"><input type="radio" name="display_data_url" id="display_data_url_3" value="groupCollapsed"/>Group collapsed</label>
				<span class="help" title="The is the URL where data is parsed from, output as a separate console log entry. Styled by Data Header (above).">?</span>
			</fieldset>

			<label>Backtrace Output Position</label>
			<fieldset class="subset">
				<label for="backtrace_position_0"><input type="radio" name="backtrace_position" id="backtrace_position_0" value="0"/>Hidden</label>
				<label for="backtrace_position_1"><input type="radio" name="backtrace_position" id="backtrace_position_1" value="1"/>Leading</label>
				<label for="backtrace_position_2"><input type="radio" name="backtrace_position" id="backtrace_position_2" value="2"/>Trailing</label>
				<span class="help" title="This is the file name and line number sent from the server with each log record. Styled by 'backtrace' option (above).">?</span>
			</fieldset>

			<div class="align-top">
				<input type="checkbox" id="inject_req_headers"/>
			</div>
			<div>
				<label for="inject_req_headers">Add '<i>X-ChromeLogger-Enabled</i>' and '<i>X-ChromeLogger-Version</i>' headers to requests when ChromeLogger is active on a browser tab.</label>
				<fieldset id="inject_req_headers_options" class="subset">
					<label for="inject_req_headers_for_types">
						Only for these <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType">request types</a> (separate values with commas):
					</label><br />
					<input id="inject_req_headers_for_types" type="text" class="flex-grow" />
				</fieldset>
			</div>

		</fieldset>

		<section class="buttonbox">
			<button id="reset">Reset to Defaults</button>
			<button id="save">Save Options</button>
			<div id="message_area"></div>  <!-- for dynamic status messages -->
		</section>

		</form>

	</body>
</html>
